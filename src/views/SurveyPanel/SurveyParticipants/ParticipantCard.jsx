import {Grid, Stack} from '@mui/material'
import React, {useEffect} from 'react'
import WbModal from '../../../components/common/WbModal'
import ParticipantList from './ParticipantList'

export default function ParticipantCard({type, list}) {
  const [open, setOpen] = React.useState(false)
  const [pList, setPList] = React.useState([])

  useEffect(() => {
    if (type === 'Parents') {
      let newList = []
      list.map(s => s.parentCarers.map(p => newList.push(p)))
      setPList(newList)
    } else {
      setPList(list)
    }
  }, [list])

  return (
    <>        
        <div className="participant-card">
            <Stack direction="row" spacing={3}>
                <div>
                  {type === 'Parents' ? (                    
                    <svg width="63" height="63" viewBox="0 0 63 63" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="31.5" cy="31.5" r="31.5" fill="#E84F6B"/>
                      <path d="M25.3327 28C26.2167 28 27.0646 27.6488 27.6897 27.0236C28.3148 26.3985 28.666 25.5507 28.666 24.6666C28.666 23.7826 28.3148 22.9347 27.6897 22.3096C27.0646 21.6845 26.2167 21.3333 25.3327 21.3333C24.4486 21.3333 23.6008 21.6845 22.9757 22.3096C22.3505 22.9347 21.9993 23.7826 21.9993 24.6666C21.9993 25.5507 22.3505 26.3985 22.9757 27.0236C23.6008 27.6488 24.4486 28 25.3327 28ZM25.3327 30.6666C24.5448 30.6666 23.7645 30.5114 23.0366 30.2099C22.3086 29.9084 21.6472 29.4664 21.09 28.9093C20.5329 28.3521 20.0909 27.6907 19.7894 26.9627C19.4879 26.2348 19.3327 25.4546 19.3327 24.6666C19.3327 23.8787 19.4879 23.0985 19.7894 22.3705C20.0909 21.6426 20.5329 20.9811 21.09 20.424C21.6472 19.8668 22.3086 19.4249 23.0366 19.1233C23.7645 18.8218 24.5448 18.6666 25.3327 18.6666C26.924 18.6666 28.4501 19.2988 29.5753 20.424C30.7005 21.5492 31.3327 23.0753 31.3327 24.6666C31.3327 26.2579 30.7005 27.784 29.5753 28.9093C28.4501 30.0345 26.924 30.6666 25.3327 30.6666ZM39.3327 33.3333C40.0399 33.3333 40.7182 33.0523 41.2183 32.5522C41.7184 32.0521 41.9993 31.3739 41.9993 30.6666C41.9993 29.9594 41.7184 29.2811 41.2183 28.781C40.7182 28.2809 40.0399 28 39.3327 28C38.6254 28 37.9472 28.2809 37.4471 28.781C36.947 29.2811 36.666 29.9594 36.666 30.6666C36.666 31.3739 36.947 32.0521 37.4471 32.5522C37.9472 33.0523 38.6254 33.3333 39.3327 33.3333ZM39.3327 36C37.9182 36 36.5616 35.4381 35.5614 34.4379C34.5613 33.4377 33.9993 32.0811 33.9993 30.6666C33.9993 29.2521 34.5613 27.8956 35.5614 26.8954C36.5616 25.8952 37.9182 25.3333 39.3327 25.3333C40.7472 25.3333 42.1037 25.8952 43.1039 26.8954C44.1041 27.8956 44.666 29.2521 44.666 30.6666C44.666 32.0811 44.1041 33.4377 43.1039 34.4379C42.1037 35.4381 40.7472 36 39.3327 36ZM42.666 44V43.3333C42.666 42.4492 42.3148 41.6014 41.6897 40.9763C41.0646 40.3511 40.2167 40 39.3327 40C38.4486 40 37.6008 40.3511 36.9757 40.9763C36.3505 41.6014 35.9993 42.4492 35.9993 43.3333V44H33.3327V43.3333C33.3327 42.5454 33.4879 41.7651 33.7894 41.0372C34.0909 40.3092 34.5329 39.6478 35.09 39.0907C35.6472 38.5335 36.3086 38.0915 37.0366 37.79C37.7645 37.4885 38.5448 37.3333 39.3327 37.3333C40.1206 37.3333 40.9008 37.4885 41.6288 37.79C42.3567 38.0915 43.0182 38.5335 43.5753 39.0907C44.1325 39.6478 44.5744 40.3092 44.876 41.0372C45.1775 41.7651 45.3327 42.5454 45.3327 43.3333V44H42.666ZM29.3327 44V38.6666C29.3327 38.1413 29.2292 37.6212 29.0282 37.1359C28.8272 36.6506 28.5325 36.2096 28.1611 35.8382C27.7897 35.4668 27.3487 35.1721 26.8634 34.9711C26.3781 34.7701 25.858 34.6666 25.3327 34.6666C24.8074 34.6666 24.2873 34.7701 23.8019 34.9711C23.3166 35.1721 22.8757 35.4668 22.5043 35.8382C22.1328 36.2096 21.8382 36.6506 21.6372 37.1359C21.4361 37.6212 21.3327 38.1413 21.3327 38.6666V44H18.666V38.6666C18.666 36.8985 19.3684 35.2028 20.6186 33.9526C21.8689 32.7023 23.5646 32 25.3327 32C27.1008 32 28.7965 32.7023 30.0467 33.9526C31.297 35.2028 31.9993 36.8985 31.9993 38.6666V44H29.3327Z" fill="white"/>
                    </svg>                    
                  ) : (
                    ''
                  )}
                  {type === 'Students' ? (
                    <svg width="63" height="63" viewBox="0 0 63 63" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="31.5" cy="31.5" r="31.5" fill="#53B5E0"/>
                      <path d="M44.3162 23.0512L32.3162 19.0512C32.111 18.9828 31.889 18.9828 31.6838 19.0512L19.6837 23.0512C19.4846 23.1176 19.3114 23.2449 19.1887 23.4152C19.066 23.5855 19 23.7901 19 24V34C19 34.2652 19.1054 34.5195 19.2929 34.7071C19.4804 34.8946 19.7348 35 20 35C20.2652 35 20.5196 34.8946 20.7071 34.7071C20.8946 34.5195 21 34.2652 21 34V25.3875L25.1987 26.7862C24.0832 28.5885 23.7285 30.7598 24.2124 32.8233C24.6964 34.8869 25.9795 36.6741 27.78 37.7925C25.53 38.675 23.585 40.2712 22.1625 42.4537C22.0885 42.5637 22.0371 42.6872 22.0113 42.8172C21.9855 42.9472 21.9858 43.081 22.0122 43.2109C22.0385 43.3408 22.0905 43.4641 22.1649 43.5737C22.2394 43.6834 22.3349 43.7771 22.4459 43.8495C22.5569 43.9219 22.6812 43.9715 22.8115 43.9955C22.9419 44.0194 23.0757 44.0172 23.2051 43.989C23.3346 43.9608 23.4572 43.9071 23.5658 43.8311C23.6743 43.7551 23.7667 43.6582 23.8375 43.5462C25.7213 40.6562 28.6962 39 32 39C35.3037 39 38.2788 40.6562 40.1625 43.5462C40.3092 43.7642 40.5357 43.9157 40.7932 43.968C41.0507 44.0203 41.3184 43.9691 41.5385 43.8256C41.7586 43.682 41.9133 43.4576 41.9692 43.2009C42.0252 42.9442 41.9779 42.6758 41.8375 42.4537C40.415 40.2712 38.4625 38.675 36.22 37.7925C38.0188 36.6741 39.3007 34.8881 39.7846 32.8261C40.2684 30.764 39.9148 28.5942 38.8013 26.7925L44.3162 24.955C44.5154 24.8886 44.6886 24.7613 44.8114 24.591C44.9342 24.4207 45.0002 24.2161 45.0002 24.0062C45.0002 23.7963 44.9342 23.5917 44.8114 23.4214C44.6886 23.2511 44.5154 23.1238 44.3162 23.0575V23.0512ZM38 31C38.0003 31.9485 37.7756 32.8836 37.3445 33.7286C36.9134 34.5735 36.2881 35.3042 35.5199 35.8607C34.7517 36.4172 33.8625 36.7836 32.9253 36.9299C31.9881 37.0762 31.0295 36.9982 30.1283 36.7022C29.2271 36.4063 28.4088 35.901 27.7407 35.2276C27.0726 34.5542 26.5737 33.7321 26.2849 32.8285C25.9961 31.925 25.9256 30.9659 26.0792 30.0298C26.2329 29.0938 26.6063 28.2075 27.1687 27.4437L31.6838 28.9437C31.889 29.0121 32.111 29.0121 32.3162 28.9437L36.8312 27.4437C37.5909 28.4737 38.0005 29.7201 38 31ZM32 26.9462L23.1625 24L32 21.0537L40.8375 24L32 26.9462Z" fill="white"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M44.517 22.9229V22.9071L32.3803 18.8615C32.1339 18.7794 31.8676 18.7794 31.6213 18.8615L19.6213 22.8615C19.3823 22.9412 19.1745 23.094 19.0273 23.2983C18.88 23.5027 18.8008 23.7481 18.8008 24C18.8008 24 18.8008 24 18.8008 24V34C18.8008 34.3183 18.9272 34.6235 19.1523 34.8485C19.3773 35.0736 19.6825 35.2 20.0008 35.2C20.319 35.2 20.6243 35.0736 20.8493 34.8485C21.0744 34.6235 21.2008 34.3183 21.2008 34V25.6649L24.9001 26.8973C23.8592 28.7005 23.5416 30.8358 24.0185 32.869C24.4852 34.8592 25.6771 36.5986 27.3537 37.7521C25.2136 38.6748 23.3655 40.2434 21.9965 42.3433C21.9082 42.475 21.8468 42.6228 21.8159 42.7783C21.785 42.9343 21.7853 43.0949 21.817 43.2507C21.8486 43.4066 21.9109 43.5546 22.0002 43.6862C22.0896 43.8177 22.2042 43.9302 22.3374 44.0171C22.4706 44.104 22.6197 44.1635 22.7762 44.1922C22.9326 44.221 23.0931 44.2183 23.2485 44.1845C23.4039 44.1506 23.551 44.0862 23.6813 43.995C23.8111 43.904 23.9217 43.7882 24.0066 43.6543C25.8554 40.8187 28.7685 39.2 32.0008 39.2C35.2335 39.2 38.147 40.8191 39.9957 43.6555L39.9973 43.6579C40.1733 43.9195 40.4452 44.1013 40.7542 44.164C41.0632 44.2268 41.3845 44.1654 41.6485 43.9931C41.9126 43.8209 42.0983 43.5516 42.1654 43.2436C42.2326 42.9355 42.1758 42.6134 42.0073 42.3469L42.0058 42.3445C40.6367 40.2439 38.7817 38.6751 36.6473 37.7523C38.3224 36.5989 39.5134 34.8606 39.9801 32.8718C40.4568 30.84 40.1404 28.7062 39.1013 26.9036L44.3803 25.1447C44.6192 25.0651 44.8271 24.9123 44.9744 24.708C45.1217 24.5037 45.201 24.2582 45.201 24.0063C45.201 23.7543 45.1217 23.5088 44.9744 23.3045C44.856 23.1402 44.6984 23.0093 44.517 22.9229ZM38.9075 26.9682C38.8732 26.9092 38.838 26.8507 38.802 26.7925L44.317 24.955C44.5162 24.8887 44.6894 24.7613 44.8122 24.591C44.9349 24.4208 45.001 24.2162 45.001 24.0063C45.001 23.7963 44.9349 23.5917 44.8122 23.4215C44.6894 23.2512 44.5162 23.1238 44.317 23.0575V23.0513L32.317 19.0513C32.1118 18.9828 31.8898 18.9828 31.6845 19.0513L19.6845 23.0513C19.4854 23.1176 19.3122 23.245 19.1895 23.4153C19.0668 23.5855 19.0008 23.7901 19.0008 24V34C19.0008 34.2652 19.1061 34.5196 19.2937 34.7071C19.4812 34.8946 19.7356 35 20.0008 35C20.266 35 20.5204 34.8946 20.7079 34.7071C20.8954 34.5196 21.0008 34.2652 21.0008 34V25.3875L25.1995 26.7863C25.1635 26.8444 25.1283 26.903 25.0939 26.9619C24.062 28.7285 23.7449 30.8264 24.2132 32.8234C24.6784 34.8071 25.8822 36.5354 27.5741 37.6597C27.6422 37.705 27.7111 37.7492 27.7808 37.7925C27.7044 37.8225 27.6284 37.8532 27.5528 37.8848C25.3994 38.784 23.5375 40.3453 22.1633 42.4538C22.0893 42.5637 22.0379 42.6873 22.0121 42.8173C21.9863 42.9472 21.9866 43.0811 22.013 43.2109C22.0393 43.3408 22.0912 43.4642 22.1657 43.5738C22.2402 43.6834 22.3357 43.7772 22.4467 43.8496C22.5577 43.922 22.6819 43.9716 22.8123 43.9955C22.9426 44.0195 23.0764 44.0173 23.2059 43.989C23.3354 43.9608 23.458 43.9071 23.5666 43.8311C23.6751 43.7551 23.7675 43.6583 23.8383 43.5463C25.722 40.6563 28.697 39 32.0008 39C35.3045 39 38.2795 40.6563 40.1633 43.5463C40.31 43.7642 40.5365 43.9158 40.794 43.968C41.0515 44.0203 41.3192 43.9691 41.5393 43.8256C41.7593 43.6821 41.9141 43.4577 41.97 43.201C42.026 42.9443 41.9787 42.6758 41.8383 42.4538C40.4641 40.3454 38.5954 38.7842 36.4484 37.885C36.3729 37.8533 36.297 37.8225 36.2208 37.7925C36.2904 37.7492 36.3592 37.705 36.4272 37.6598C38.1175 36.5356 39.3202 34.8084 39.7853 32.8261C40.2536 30.8306 39.9376 28.7342 38.9075 26.9682ZM37.8008 30.9999C37.8013 29.8111 37.4356 28.6521 36.7555 27.6799L32.3803 29.1335C32.1339 29.2156 31.8676 29.2156 31.6213 29.1335L27.2462 27.68C26.7494 28.3911 26.4181 29.2051 26.2774 30.0623C26.1288 30.9671 26.197 31.8943 26.4762 32.7677C26.7554 33.6411 27.2377 34.4359 27.8835 35.0868C28.5293 35.7377 29.3203 36.2262 30.1915 36.5123C31.0627 36.7983 31.9893 36.8737 32.8953 36.7323C33.8012 36.5909 34.6608 36.2367 35.4034 35.6988C36.1459 35.1608 36.7504 34.4545 37.1672 33.6377C37.5839 32.821 37.801 31.9169 37.8008 30.9999ZM27.1695 27.4438C26.607 28.2075 26.2337 29.0938 26.08 30.0299C25.9264 30.9659 25.9968 31.925 26.2857 32.8286C26.5745 33.7321 27.0734 34.5543 27.7415 35.2277C28.4096 35.901 29.2279 36.4064 30.1291 36.7023C31.0303 36.9982 31.9889 37.0762 32.9261 36.9299C33.8633 36.7836 34.7525 36.4172 35.5207 35.8607C36.2889 35.3043 36.9142 34.5736 37.3453 33.7286C37.7764 32.8837 38.0011 31.9486 38.0008 31C38.0013 29.7201 37.5917 28.4738 36.832 27.4438L32.317 28.9438C32.1118 29.0122 31.8898 29.0122 31.6845 28.9438L27.1695 27.4438ZM32.0008 26.7354L40.2059 24L32.0008 21.2646L23.7957 24L32.0008 26.7354ZM32.0008 26.9463L40.8383 24L32.0008 21.0538L23.1633 24L32.0008 26.9463Z" fill="white"/>
                    </svg>
                  ) : (
                    ''
                  )}
                  {type === 'Staff' ? (
                    <svg width="63" height="63" viewBox="0 0 63 63" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="31.5" cy="31.5" r="31.5" fill="#007A7A"/>
                      <path d="M45.2978 42.25C43.584 39.2421 40.9079 36.8984 37.7003 35.5962C39.2954 34.3999 40.4737 32.732 41.0682 30.8288C41.6627 28.9256 41.6433 26.8836 41.0128 24.9921C40.3823 23.1005 39.1726 21.4553 37.555 20.2894C35.9375 19.1236 33.9942 18.4962 32.0003 18.4962C30.0064 18.4962 28.0631 19.1236 26.4456 20.2894C24.828 21.4553 23.6183 23.1005 22.9878 24.9921C22.3573 26.8836 22.3379 28.9256 22.9324 30.8288C23.5269 32.732 24.7052 34.3999 26.3003 35.5962C23.0927 36.8984 20.4166 39.2421 18.7028 42.25C18.5966 42.4207 18.5258 42.6111 18.4947 42.8097C18.4635 43.0084 18.4726 43.2113 18.5215 43.4063C18.5703 43.6014 18.6578 43.7847 18.7789 43.9452C18.8999 44.1058 19.0521 44.2403 19.2262 44.3409C19.4003 44.4415 19.5928 44.5061 19.7924 44.5308C19.992 44.5555 20.1944 44.5398 20.3878 44.4847C20.5812 44.4295 20.7615 44.3361 20.9181 44.2099C21.0746 44.0836 21.2042 43.9273 21.299 43.75C23.564 39.835 27.564 37.5 32.0003 37.5C36.4366 37.5 40.4366 39.8362 42.7015 43.75C42.9072 44.0806 43.2334 44.3184 43.6111 44.4129C43.9888 44.5075 44.3885 44.4514 44.7257 44.2566C45.0629 44.0618 45.3111 43.7435 45.4178 43.3691C45.5246 42.9946 45.4816 42.5933 45.2978 42.25ZM25.5003 28C25.5003 26.7144 25.8815 25.4577 26.5957 24.3888C27.31 23.3198 28.3251 22.4867 29.5129 21.9947C30.7006 21.5028 32.0075 21.3741 33.2684 21.6249C34.5293 21.8757 35.6875 22.4947 36.5965 23.4038C37.5055 24.3128 38.1246 25.471 38.3754 26.7319C38.6262 27.9928 38.4975 29.2997 38.0055 30.4874C37.5135 31.6751 36.6804 32.6903 35.6115 33.4045C34.5426 34.1187 33.2859 34.5 32.0003 34.5C30.277 34.498 28.6249 33.8125 27.4063 32.594C26.1877 31.3754 25.5023 29.7233 25.5003 28Z" fill="white"/>
                    </svg>
                  ) : (
                    ''
                  )}
                </div>
                <div>
                    <h3>{type}</h3>
                    <div className="total-participant">Total Participants: <span>{pList?.length}</span></div>
                    <div className="show-participant" onClick={() => setOpen(true)}>Show Participants</div>
                </div>
            </Stack>
        </div>        
        {open && (
            <WbModal
                onClose={e => setOpen(false)}
                title={'Participants'}
                content={<ParticipantList list={pList} />}
            ></WbModal>
        )}
    </>
  )
}
